'use client'
import { useEffect, useState } from 'react'
export default function OTAudit(){ const [date,setDate]=useState(new Date().toISOString().slice(0,10)); const [rows,setRows]=useState<any[]>([]); async function load(){ setRows(await fetch(`/api/admin/ot/audit?date=${date}`).then(r=>r.json())) } useEffect(()=>{ load() },[]); return (<div style={{padding:24}}><h1>OT Caps Audit</h1><div style={{display:'flex',gap:8}}><input type='date' value={date} onChange={e=>setDate(e.target.value)}/><button onClick={load}>Load</button></div><table cellPadding={6} style={{marginTop:12}}><thead><tr><th>Emp</th><th>Date</th><th>Before R/W/H</th><th>After R/W/H</th><th>Week Used</th></tr></thead><tbody>{rows.map((r:any)=> (<tr key={r.id}><td>#{r.employee_id}</td><td>{r.work_date}</td><td>{r.before_regular}/{r.before_weekend}/{r.before_holiday}</td><td>{r.after_regular}/{r.after_weekend}/{r.after_holiday}</td><td>{r.week_used_before}</td></tr>))}</tbody></table></div>) }
