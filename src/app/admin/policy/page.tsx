'use client'
import { useEffect, useState } from 'react'
export default function Policy(){ const [pol,setPol]=useState<any>({include_ot_in_gosi_base:false,week_start_day:'sun',ot_caps:{per_day_minutes:240,per_week_minutes:720,enforce:true,excess_handling:'truncate'}}); useEffect(()=>{ fetch('/api/admin/policy').then(r=>r.json()).then(setPol).catch(()=>{}) },[]); async function save(){ await fetch('/api/admin/policy',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(pol)}); alert('Saved') } return (<div style={{padding:24}}><h1>Payroll Policy</h1><label><input type='checkbox' checked={!!pol.include_ot_in_gosi_base} onChange={e=>setPol({...pol,include_ot_in_gosi_base:e.target.checked})}/> Include OT in GOSI base</label><div><label>Week start <select value={pol.week_start_day||'sun'} onChange={e=>setPol({...pol,week_start_day:e.target.value})}><option value='fri'>Friday</option><option value='sat'>Saturday</option><option value='sun'>Sunday</option></select></label></div><h3>OT Caps</h3><label>Per-day <input type='number' value={pol.ot_caps?.per_day_minutes||0} onChange={e=>setPol({...pol,ot_caps:{...pol.ot_caps,per_day_minutes:Number(e.target.value)}})}/></label><label>Per-week <input type='number' value={pol.ot_caps?.per_week_minutes||0} onChange={e=>setPol({...pol,ot_caps:{...pol.ot_caps,per_week_minutes:Number(e.target.value)}})}/></label><label>Enforce <input type='checkbox' checked={!!pol.ot_caps?.enforce} onChange={e=>setPol({...pol,ot_caps:{...pol.ot_caps,enforce:e.target.checked}})}/></label><label>Excess <select value={pol.ot_caps?.excess_handling||'truncate'} onChange={e=>setPol({...pol,ot_caps:{...pol.ot_caps,excess_handling:e.target.value}})}><option value='truncate'>truncate</option><option value='reject'>reject</option><option value='carryover'>carryover</option></select></label><div><button onClick={save}>Save Policy</button></div></div>) }
