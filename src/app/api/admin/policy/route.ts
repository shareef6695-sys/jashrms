import { NextRequest } from 'next/server'; import { query } from '@/lib/db'; export async function GET(){ const {rows}=await query<any>(`SELECT value FROM settings WHERE key='payroll_policy'`); return new Response(JSON.stringify(rows[0]?.value||{}),{headers:{'Content-Type':'application/json'}}) } export async function POST(req:NextRequest){ const body=await req.json(); await query(`INSERT INTO settings(key,value) VALUES('payroll_policy',$1) ON CONFLICT (key) DO UPDATE SET value=EXCLUDED.value`,[body]); return new Response('Saved',{status:200}) }
