import { NextRequest } from 'next/server'; import { query } from '@/lib/db'; export async function GET(){ const {rows}=await query<any>(`SELECT * FROM holidays ORDER BY date`); return new Response(JSON.stringify(rows),{headers:{'Content-Type':'application/json'}}) } export async function POST(req:NextRequest){ const {date,name}=await req.json(); await query(`INSERT INTO holidays(date,name) VALUES($1,$2) ON CONFLICT (date) DO UPDATE SET name=EXCLUDED.name`,[date,name||null]); return new Response('Saved',{status:200}) }
