import { NextRequest } from 'next/server'; import { query } from '@/lib/db'; export async function POST(req:NextRequest){ const items=await req.json(); if(!Array.isArray(items)) return new Response('Expected an array',{status:400}); for(const it of items){ if(!it?.date) continue; await query(`INSERT INTO holidays(date,name) VALUES($1,$2) ON CONFLICT (date) DO UPDATE SET name=EXCLUDED.name`,[it.date,it.name||null]) } return new Response('Imported',{status:200}) }
