import { NextRequest } from 'next/server'; import { query } from '@/lib/db'; export async function GET(){ const {rows}=await query<any>(`SELECT * FROM shifts WHERE active=true ORDER BY id DESC`); return new Response(JSON.stringify(rows),{headers:{'Content-Type':'application/json'}}) } export async function POST(req:NextRequest){ const b=await req.json(); const {name,code,start_time,end_time,overnight=false,break_minutes=60,weekly_off=[5,6]}=b; const {rows}=await query<any>(`INSERT INTO shifts(name,code,start_time,end_time,overnight,break_minutes,weekly_off) VALUES($1,$2,$3,$4,$5,$6,$7) RETURNING id`,[name,code,start_time,end_time,overnight,break_minutes,weekly_off]); return new Response(JSON.stringify({id:rows[0].id}),{headers:{'Content-Type':'application/json'}}) }
