import { NextRequest } from 'next/server'; import { query } from '@/lib/db'; export async function GET(){ const {rows}=await query<any>(`SELECT * FROM overtime_rules ORDER BY effective_from DESC LIMIT 5`); return new Response(JSON.stringify(rows),{headers:{'Content-Type':'application/json'}}) } export async function POST(req:NextRequest){ const {effective_from,cfg}=await req.json(); await query(`INSERT INTO overtime_rules(effective_from,name,cfg) VALUES($1,$2,$3)`,[effective_from,`Rule ${effective_from}`,cfg]); return new Response('Saved',{status:200}) }
